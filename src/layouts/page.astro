---
import { Content1 } from "@/blocks/content-1"
import BaseLayout from "@/layouts/base.astro"
import type { LayoutSchema } from "@/schemas/layout"
import type { PageSchema } from "@/schemas/page"

import Block from "@/components/block.astro"

type Props = PageSchema & LayoutSchema

const { title, description, image, blocks, ...props } = Astro.props

const slot = await Astro.slots.render("default")
---

<BaseLayout title={title} description={description} image={image} {...props}>
  {
    slot.trim().length > 0 && (
      <Content1
        client:load
        heading={title}
        paragraph={description}
        image={image}
      >
        <Fragment set:html={slot} />
      </Content1>
    )
  }
  {blocks?.map((block) => <Block {...block} />)}
</BaseLayout>
