---
import ArticleLayout from "@/layouts/article.astro"
import { getCollection, getEntry, render } from "astro:content"

export async function getStaticPaths() {
  const entries = await getCollection("articles")
  return entries.map((entry) => {
    return {
      params: {
        blog: entry.data.blog?.id === "index" ? undefined : entry.data.blog?.id,
        article: entry.id,
      },
      props: entry,
    }
  })
}

const layout = await getEntry("layouts", "base")

const { Content } = await render(Astro.props)
---

<ArticleLayout {...layout?.data} {...Astro.props.data}>
  <Content />
</ArticleLayout>
